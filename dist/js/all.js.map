{"version":3,"sources":["custom.js"],"names":["kickLinksOut","link","$","is","linkArr","get","i","len","length","attr","initFeatherlight","articleImg","imgArr","hrefVal","featherlightGallery","initFeatherlightSingle","el","$el","vertImgFix","width","height","parent","addClass","imgTitle","each","append","sbsVertImg","j","nextSibling","next","generateArticleIcon","articleType","document","querySelector","dataset","category","selectedArr","iconArrJapan","iconArrIndo","Math","floor","random","articleLinks","backtoTopButton","back2Top","scrollTrigger","backToTop","scrollTop","window","removeClass","on","e","preventDefault","animate","imgClearfix","prev","before","hasClass","instaBannerHashtagLink","bannerTitle","innerHTML","charAt","linkRef","text","substring","wrap","initPostGridMasonry","postGridEl","postGridMsnry","masonry","itemSelector","columnWidth","gutter","percentPosition","imagesLoaded","progress","articleImgLazy","lazyload","effect","threshold","appear","ready","instance","image","imgEl","img","delay","done"],"mappings":"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","file":"all.js","sourcesContent":["/**\n * Verify links and convert to open in new tab\n * @return {[type]} [description]\n */\nfunction kickLinksOut(){\n\tvar link = $('.social-media-list li a');\n\n\tif (!(link.is('a'))){\n\t\t// console.log(link + \"is not a link.\");\n\t\treturn false;\n\t}\n\n\tvar linkArr = link.get();\n\n\tfor (var i=0, len=linkArr.length; i<len; i++){\n\t\t$(linkArr[i]).attr(\"target\",\"_blank\");\n\t}\n}\n\n/**\n * Image modal viewer for articles\n */\nfunction initFeatherlight(){\n\tvar articleImg = $('article img');\n\tvar imgArr = articleImg.get();\n\tvar hrefVal;\n\n\t// for each article image found, duplicate the img-src\n\t// value into a data-featherlight attr\n\tfor (var i=0, len=imgArr.length; i<len; i++){\n\t\t hrefVal = $(imgArr[i]).attr('src');\n\t\t $(imgArr[i]).attr('data-featherlight',hrefVal);\n\t}\n\n\t// articleImg.featherlight();\n\tarticleImg.featherlightGallery();\n}\n\nfunction initFeatherlightSingle(el){\n\tvar hrefVal;\n\tvar $el = $(el);\n\n\threfVal = $el.attr('data-original');\n\t$el.attr('data-featherlight',hrefVal);\n\n\t// articleImg.featherlight();\n\t$el.featherlightGallery();\n}\n\n/**\n * Detect portrait images and add class to fix alignment\n * @return {[type]} [description]\n */\nfunction vertImgFix(){\n\tvar imgArr = $('article img').get();\n\n\tfor (var i=0, len=imgArr.length; i<len; i++){\n\t\t// console.log(imgArr[i]);\n\t\tif( $(imgArr[i]).width() < $(imgArr[i]).height() ){\n\t\t\t$(imgArr[i]).parent().addClass('vert-img');\n\t\t}\n\t}\n}\n\n/**\n * Add markdown image title/alt attr into a caption below\n * the image\n * @return {[type]} [description]\n */\nfunction imgTitle(){\n\t$('article img').each(function(){\n\t\t$(this).attr('title', $(this).attr('alt'));\n\t\t$(this).parent().append('<span class=\"caption\">'+$(this).attr('alt')+'</span>')\n\t})\n}\n\n/**\n * Detect side-by-side portrait images and add a class for\n * alignment\n * @return {[type]} [description]\n */\nfunction sbsVertImg(){\n\tvar imgArr = $('article .vert-img').get();\n\n\tvar j = 0;\n\n\tif (imgArr.length <= 0) {\n\t\treturn false;\n\t}\n\n\tfor (var i=0, len=imgArr.length; i<len;  i++){\n\t\tvar nextSibling = $(imgArr[i]).next();\n\n\t\tif (nextSibling.attr('class') == 'vert-img'){\n\t\t\t$(imgArr[i]).addClass('col-2-img');\n\t\t\tnextSibling.addClass('col-2-img');\n\t\t\tj++;\n\t\t}\n\t}\n\n\t// if (j > 0){\n\t \t// console.log(j + \"pairs of vertical images found\");\n\t// } else {\n\t \t// console.log(\"no pairs of vertical images found.\");\n\t// }\n}\n\n/**\n * Random food icon generated at end of each article\n * - for japan articles only\n * @return {[type]} [description]\n */\nfunction generateArticleIcon(){\n\tvar articleType = document.querySelector('article').dataset.category;\n\tvar selectedArr;\n\n\tvar iconArrJapan = [\n\t\t\"unagi-nigiri\",\n\t\t\"udon\",\n\t\t\"nigiri\",\n\t\t\"ikura-gunkan-maki\",\n\t\t\"okonomiyaki\"\n\t];\n\n\tvar iconArrIndo = [\n\t\t\"backpack\",\n\t\t\"horse\",\n\t\t\"palm-trees\",\n\t\t\"surf\",\n\t\t\"volcano\",\n\t\t\"beach\",\n\t\t\"sea\",\n\t\t\"summer\"\n\t];\n\n\tswitch(articleType) {\n\t\tcase 'indonesia':\n\t\tselectedArr = iconArrIndo;\n\t\tbreak;\n\t\tcase 'japan':\n\t\tselectedArr = iconArrJapan;\n\t\tbreak;\n\t\tdefault:\n\t\tbreak;\n\t}\n\n\tvar i = Math.floor((Math.random() * 5));\n\n\t$('.post-flourish.top').addClass(selectedArr[i]);\n}\n\n/**\n * open all inline article links in a new tab\n * @return {[type]} [description]\n */\nfunction articleLinks(){\n\t$('article a').each(function(){\n\t\t$(this).attr('target','_blank');\n\t});\n}\n\n/**\n * Back to top hover button in article page\n * @return {[type]} [description]\n */\nfunction backtoTopButton() {\n\tvar back2Top = $('#backtotop');\n\n\tif (back2Top.length) {\n\t    var scrollTrigger = 100; // scroll tolerance in px\n\t    var backToTop = function () {\n\t\t\tvar scrollTop = $(window).scrollTop();\n\t\t\tif (scrollTop > scrollTrigger) {\n\t\t\t   back2Top.addClass('show');\n\t\t\t} else {\n\t\t\t   back2Top.removeClass('show');\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * init back2top btn\n\t\t */\n\t    backToTop();\n\n\t\t/**\n\t\t * window scroll handler\n\t\t * for back2top btn\n\t\t */\n\t    $(window).on('scroll', function () {\n\t        backToTop();\n\t    });\n\n\t\t/**\n\t\t * click hander for back2top btn\n\t\t */\n\t    back2Top.on('click', function (e) {\n\t        e.preventDefault();\n\t        $('html,body').animate({\n\t            scrollTop: 0\n\t        }, 700);\n\t    });\n\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * [imgClearfix description]\n * @return {[type]} [description]\n */\nfunction imgClearfix() {\n\t/**\n\t * add clearfix div to before side-by-side images\n\t * for alignment fix\n\t */\n\t$('article .vert-img.col-2-img').each(function(){\n\t\tif (!$(this).prev().is('p')){\n\t\t\t$(this).before('<div class=\"empty-fill\"></div>');\n\t\t}\n\t});\n\n\t/**\n\t * add clearfix to before landscape images\n\t */\n\t$('article p:not(.vert-img)').each(function(){\n\t\tif ($(this).prev().hasClass('vert-img')){\n\t\t\t$(this).before('<div class=\"empty-fill\"></div>');\n\t\t}\n\t});\n}\n\n/**\n * Generate instagram banner hashtag\n * @return {[type]} [description]\n */\nfunction instaBannerHashtagLink() {\n\t/**\n\t * link the banner title to instagram to fetch hashtag\n\t */\n\tvar bannerTitle = $('.banner .text h3');\n\n\t// determine if string is hashtag before converting to link\n\tif (bannerTitle.length && bannerTitle[0].innerHTML.charAt(0) === '#') {\n\t\tvar linkRef = 'https://www.instagram.com/explore/tags/' + bannerTitle.text().substring(1);\n\t\tbannerTitle.wrap('<a></a>').parent().attr({\n\t\t\t'target':'_blank',\n\t\t\t'href':linkRef,\n\t\t});\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * initialize post grid masonry\n * @return {[type]} [description]\n */\nfunction initPostGridMasonry() {\n\tvar postGridEl = $('.post-grid');\n\n\tif (postGridEl.length) {\n\t\t/**\n\t\t * masonry grid for home page\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tvar postGridMsnry = postGridEl.masonry({\n\t\t\titemSelector: '.post-item',\n\t\t\tcolumnWidth: '.post-grid-sizer',\n\t\t\tgutter: 0,\n\t\t\tpercentPosition: true\n\t\t});\n\n\t\tpostGridMsnry.imagesLoaded().progress( function() {\n\t\t\tpostGridMsnry.masonry('layout');\n\t\t});\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * lazy load article images\n */\nfunction articleImgLazy() {\n\t$(\"img.lazy\").lazyload({\n\t\teffect : \"fadeIn\",\n\t\tthreshold: 200,\n\t\tappear: function(){\n\t\t\tvertImgFix(); // alignment for vertical images\n\t\t\tsbsVertImg(); // alignment for side-by-side vertical images\n\t\t\tinitFeatherlightSingle(this);\n\t\t}\n\t});\n}\n\n/**\n * init scripts\n */\n$(document).ready(function(){\n\n\tinitPostGridMasonry();\n\tinstaBannerHashtagLink();\n\tkickLinksOut();\n\n\tif ($('article').length) {\n\t\tinitFeatherlight();\n\t\tgenerateArticleIcon();\n\t\tarticleLinks();\n\t\tbacktoTopButton();\n\t\tarticleImgLazy();\n\n\t\t$('article').imagesLoaded()\n\t\t\t.progress(function(instance, image){\n\t\t\t\t// console.log('imgload-progress', image.img);\n\n\t\t\t\tvar imgEl = $(image.img);\n\t\t\t\t/**\n\t\t\t\t * Delay image display until all images in <p> tag\n\t\t\t\t * have been loaded\n\t\t\t\t *\n\t\t\t\t * (2017) what a shitty implementation of lazy load, you should\n\t\t\t\t * be ashamed.\n\t\t\t\t */\n\t\t\t\tif ($(window).width() > 768){\n\t\t\t\t\timgEl.delay('400').addClass('ready');\n\t\t\t\t} else {\n\t\t\t\t\timgEl.addClass('ready');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.done(function(instance){\n\t\t\t\t// console.log('imageload done');\n\t\t\t\tvertImgFix(); // alignment for vertical images\n\t\t\t\tsbsVertImg(); // alignment for side-by-side vertical images\n\t\t\t\timgTitle(); // generate image caption\n\t\t\t\timgClearfix(); // clearfix for article images\n\n\t\t\t});\n\t}\n});\n"]}