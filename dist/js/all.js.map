{"version":3,"sources":["01-custom.js","02-article.js","03-init.js"],"names":["kickLinksOut","link","is","linkArr","get","i","len","length","$","attr","backtoTopButton","back2Top","scrollTrigger","window","backToTop","scrollTop","removeClass","on","e","preventDefault","animate","instaBannerHashtagLink","bannerTitle","innerHTML","charAt","linkRef","text","substring","wrap","parent","target","href","initPostGridMasonry","postGridEl","postGridMsnry","masonry","itemSelector","columnWidth","gutter","percentPosition","imagesLoaded","progress","articleImgLazy","effect","threshold","appear","vertImgFix","sbsVertImg","this","imgClearfix","each","prev","before","hasClass","initFeatherlight","imgArr","articleImg","hrefVal","featherlightGallery","initFeatherlightSingle","el","$el","width","height","addClass","imgTitle","append","nextSibling","generateArticleIcon","articleType","querySelector","dataset","category","selectedArr","Math","floor","random","articleLinks","document","ready","imgEl","image","img","delay","done","instance"],"mappings":"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","file":"all.js","sourcesContent":["'use strict';\n\n/* globals $ */\n/* globals document*/\n/* globals window */\n\n/**\n * Verify links and convert to open in new tab\n * @return {[type]} [description]\n */\nfunction kickLinksOut(){\n\tvar link = $('.social-media-list li a');\n\n\tif (!(link.is('a'))){\n\t\t// console.log(link + \"is not a link.\");\n\t\treturn false;\n\t}\n\n\tvar linkArr = link.get();\n\n\tfor (var i=0, len=linkArr.length; i<len; i++){\n\t\t$(linkArr[i]).attr(\"target\",\"_blank\");\n\t}\n}\n\n/**\n * Back to top hover button in article page\n * @return {[type]} [description]\n */\nfunction backtoTopButton() {\n\tvar back2Top = $('#backtotop');\n\n\tif (back2Top.length) {\n\t    var scrollTrigger = 100; // scroll tolerance in px\n\t    var backToTop = function () {\n\t\t\tvar scrollTop = $(window).scrollTop();\n\t\t\tif (scrollTop > scrollTrigger) {\n\t\t\t   back2Top.addClass('show');\n\t\t\t} else {\n\t\t\t   back2Top.removeClass('show');\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * init back2top btn\n\t\t */\n\t    backToTop();\n\n\t\t/**\n\t\t * window scroll handler\n\t\t * for back2top btn\n\t\t */\n\t    $(window).on('scroll', function () {\n\t        backToTop();\n\t    });\n\n\t\t/**\n\t\t * click hander for back2top btn\n\t\t */\n\t    back2Top.on('click', function (e) {\n\t        e.preventDefault();\n\t        $('html,body').animate({\n\t            scrollTop: 0\n\t        }, 700);\n\t    });\n\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * Generate instagram banner hashtag\n * @return {[type]} [description]\n */\nfunction instaBannerHashtagLink() {\n\t/**\n\t * link the banner title to instagram to fetch hashtag\n\t */\n\tvar bannerTitle = $('.banner .text h3');\n\n\t// determine if string is hashtag before converting to link\n\tif (bannerTitle.length && bannerTitle[0].innerHTML.charAt(0) === '#') {\n\t\tvar linkRef = 'https://www.instagram.com/explore/tags/' + bannerTitle.text().substring(1);\n\t\tbannerTitle.wrap('<a></a>').parent().attr({\n\t\t\t'target':'_blank',\n\t\t\t'href':linkRef,\n\t\t});\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * initialize post grid masonry\n * @return {[type]} [description]\n */\nfunction initPostGridMasonry() {\n\tvar postGridEl = $('.post-grid');\n\n\tif (postGridEl.length) {\n\t\t/**\n\t\t * masonry grid for home page\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tvar postGridMsnry = postGridEl.masonry({\n\t\t\titemSelector: '.post-item',\n\t\t\tcolumnWidth: '.post-grid-sizer',\n\t\t\tgutter: 0,\n\t\t\tpercentPosition: true\n\t\t});\n\n\t\tpostGridMsnry.imagesLoaded().progress( function() {\n\t\t\tpostGridMsnry.masonry('layout');\n\t\t});\n\t} else {\n\t\treturn false;\n\t}\n}\n","'use strict';\n\n/* globals $ */\n/* globals document*/\n/* globals window */\n\n/**\n * lazy load article images\n */\nfunction articleImgLazy() {\n\t$(\"img.lazy\").lazyload({\n\t\teffect : \"fadeIn\",\n\t\tthreshold: 200,\n\t\tappear: function(){\n\t\t\tvertImgFix(); // alignment for vertical images\n\t\t\tsbsVertImg(); // alignment for side-by-side vertical images\n\t\t\tinitFeatherlightSingle(this);\n\t\t}\n\t});\n}\n\n/**\n * [imgClearfix description]\n * @return {[type]} [description]\n */\nfunction imgClearfix() {\n\t/**\n\t * add clearfix div to before side-by-side images\n\t * for alignment fix\n\t */\n\t$('article .vert-img.col-2-img').each(function(){\n\t\tif (!$(this).prev().is('p')){\n\t\t\t$(this).before('<div class=\"empty-fill\"></div>');\n\t\t}\n\t});\n\n\t/**\n\t * add clearfix to before landscape images\n\t */\n\t$('article p:not(.vert-img)').each(function(){\n\t\tif ($(this).prev().hasClass('vert-img')){\n\t\t\t$(this).before('<div class=\"empty-fill\"></div>');\n\t\t}\n\t});\n}\n\n/**\n * Image modal viewer for articles\n */\nfunction initFeatherlight(){\n\tvar articleImg = $('article img');\n\tvar imgArr = articleImg.get();\n\tvar hrefVal;\n\n\t// for each article image found, duplicate the img-src\n\t// value into a data-featherlight attr\n\tfor (var i=0, len=imgArr.length; i<len; i++){\n\t\t hrefVal = $(imgArr[i]).attr('src');\n\t\t $(imgArr[i]).attr('data-featherlight',hrefVal);\n\t}\n\n\t// articleImg.featherlight();\n\tarticleImg.featherlightGallery();\n}\n\nfunction initFeatherlightSingle(el){\n\tvar hrefVal;\n\tvar $el = $(el);\n\n\threfVal = $el.attr('data-original');\n\t$el.attr('data-featherlight',hrefVal);\n\n\t// articleImg.featherlight();\n\t$el.featherlightGallery();\n}\n\n/**\n * Detect portrait images and add class to fix alignment\n * @return {[type]} [description]\n */\nfunction vertImgFix(){\n\tvar imgArr = $('article img').get();\n\n\tfor (var i=0, len=imgArr.length; i<len; i++){\n\t\t// console.log(imgArr[i]);\n\t\tif( $(imgArr[i]).width() < $(imgArr[i]).height() ){\n\t\t\t$(imgArr[i]).parent().addClass('vert-img');\n\t\t}\n\t}\n}\n\n/**\n * Add markdown image title/alt attr into a caption below\n * the image\n * @return {[type]} [description]\n */\nfunction imgTitle(){\n\t$('article img').each(function(){\n\t\t$(this).attr('title', $(this).attr('alt'));\n\t\t$(this).parent().append('<span class=\"caption\">'+$(this).attr('alt')+'</span>')\n\t})\n}\n\n/**\n * Detect side-by-side portrait images and add a class for\n * alignment\n * @return {[type]} [description]\n */\nfunction sbsVertImg(){\n\tvar imgArr = $('article .vert-img').get();\n\n\tvar j = 0;\n\n\tif (imgArr.length <= 0) {\n\t\treturn false;\n\t}\n\n\tfor (var i=0, len=imgArr.length; i<len;  i++){\n\t\tvar nextSibling = $(imgArr[i]).next();\n\n\t\tif (nextSibling.attr('class') == 'vert-img'){\n\t\t\t$(imgArr[i]).addClass('col-2-img');\n\t\t\tnextSibling.addClass('col-2-img');\n\t\t\tj++;\n\t\t}\n\t}\n\n\t// if (j > 0){\n\t \t// console.log(j + \"pairs of vertical images found\");\n\t// } else {\n\t \t// console.log(\"no pairs of vertical images found.\");\n\t// }\n}\n\n/**\n * Random food icon generated at end of each article\n * - for japan articles only\n * @return {[type]} [description]\n */\nfunction generateArticleIcon(){\n\tvar articleType = document.querySelector('article').dataset.category;\n\tvar selectedArr;\n\n\tvar iconArrJapan = [\n\t\t\"unagi-nigiri\",\n\t\t\"udon\",\n\t\t\"nigiri\",\n\t\t\"ikura-gunkan-maki\",\n\t\t\"okonomiyaki\"\n\t];\n\n\tvar iconArrIndo = [\n\t\t\"backpack\",\n\t\t\"horse\",\n\t\t\"palm-trees\",\n\t\t\"surf\",\n\t\t\"volcano\",\n\t\t\"beach\",\n\t\t\"sea\",\n\t\t\"summer\"\n\t];\n\n\tswitch(articleType) {\n\t\tcase 'indonesia':\n\t\tselectedArr = iconArrIndo;\n\t\tbreak;\n\t\tcase 'japan':\n\t\tdefault:\n\t\tselectedArr = iconArrJapan;\n\t\tbreak;\n\t}\n\n\tvar i = Math.floor((Math.random() * 5));\n\n\t$('.post-flourish.top').addClass(selectedArr[i]);\n}\n\n/**\n * open all inline article links in a new tab\n * @return {[type]} [description]\n */\nfunction articleLinks(){\n\t$('article a').each(function(){\n\t\t$(this).attr('target','_blank');\n\t});\n}\n","'use strict';\n\n/* globals $ */\n/* globals document*/\n/* globals window */\n\n/* globals initPostGridMasonry */\n/* globals instaBannerHashtagLink */\n/* globals kickLinksOut */\n/* globals initFeatherlight */\n/* globals generateArticleIcon */\n/* globals articleLinks */\n/* globals backtoTopButton */\n/* globals articleImgLazy */\n/* globals vertImgFix */\n/* globals sbsVertImg */\n/* globals imgTitle */\n/* globals imgClearfix */\n\n/**\n * init scripts\n */\n$(document).ready(function(){\n\n\tinitPostGridMasonry();\n\tinstaBannerHashtagLink();\n\tkickLinksOut();\n\n\tif ($('article').length) {\n\t\tinitFeatherlight();\n\t\tgenerateArticleIcon();\n\t\tarticleLinks();\n\t\tbacktoTopButton();\n\t\tarticleImgLazy();\n\n\t\t$('article').imagesLoaded()\n\t\t\t.progress(function(instance, image){\n\t\t\t\t// console.log('imgload-progress', image.img);\n\n\t\t\t\tvar imgEl = $(image.img);\n\t\t\t\t/**\n\t\t\t\t * Delay image display until all images in <p> tag\n\t\t\t\t * have been loaded\n\t\t\t\t *\n\t\t\t\t * (2017) what a shitty implementation of lazy load, you should\n\t\t\t\t * be ashamed.\n\t\t\t\t */\n\t\t\t\tif ($(window).width() > 768){\n\t\t\t\t\timgEl.delay('400').addClass('ready');\n\t\t\t\t} else {\n\t\t\t\t\timgEl.addClass('ready');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.done(function(instance){\n\t\t\t\t// console.log('imageload done');\n\t\t\t\tvertImgFix(); // alignment for vertical images\n\t\t\t\tsbsVertImg(); // alignment for side-by-side vertical images\n\t\t\t\timgTitle(); // generate image caption\n\t\t\t\timgClearfix(); // clearfix for article images\n\n\t\t\t});\n\t}\n});\n"]}