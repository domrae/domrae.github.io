{"version":3,"sources":["01-custom.js","02-article.js","03-init.js"],"names":["backtoTopButton","back2Top","length","scrollTrigger","$","window","backToTop","scrollTop","removeClass","on","e","preventDefault","animate","instaBannerHashtagLink","bannerTitle","innerHTML","charAt","linkRef","text","substring","wrap","parent","attr","target","href","initPostGridMasonry","postGridEl","postGridMsnry","masonry","itemSelector","columnWidth","gutter","percentPosition","imagesLoaded","progress","articleImgLazy","effect","threshold","appear","vertImgFix","sbsVertImg","this","imgClearfix","each","prev","is","before","hasClass","initFeatherlight","imgArr","articleImg","get","i","len","hrefVal","featherlightGallery","initFeatherlightSingle","el","$el","width","height","addClass","imgTitle","append","nextSibling","generateArticleIcon","articleType","querySelector","dataset","category","selectedArr","Math","floor","random","articleLinks","rel","loadPlugins","componentStr","component","replace","JSON","parse","map","val","key","console","log","document","ready","instance","image","imgEl","img","done"],"mappings":"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","file":"all.js","sourcesContent":["'use strict';\n\n/* globals $ */\n/* globals document*/\n/* globals window */\n\n/**\n * Back to top hover button in article page\n * data-component = 'back-to-top'\n */\nfunction backtoTopButton() {\n\tvar back2Top = $('#backtotop');\n\n\tif (back2Top.length) {\n\t    var scrollTrigger = 100; // scroll tolerance in px\n\t    var backToTop = function () {\n\t\t\tvar scrollTop = $(window).scrollTop();\n\t\t\tif (scrollTop > scrollTrigger) {\n\t\t\t   back2Top.addClass('show');\n\t\t\t} else {\n\t\t\t   back2Top.removeClass('show');\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * init back2top btn\n\t\t */\n\t    backToTop();\n\n\t\t/**\n\t\t * window scroll handler\n\t\t * for back2top btn\n\t\t */\n\t    $(window).on('scroll', function () {\n\t        backToTop();\n\t    });\n\n\t\t/**\n\t\t * click hander for back2top btn\n\t\t */\n\t    back2Top.on('click', function (e) {\n\t        e.preventDefault();\n\t        $('html,body').animate({\n\t            scrollTop: 0\n\t        }, 700);\n\t    });\n\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * Generate instagram banner hashtag\n * data-component = 'banner-hashtag'\n */\nfunction instaBannerHashtagLink() {\n\t/**\n\t * link the banner title to instagram to fetch hashtag\n\t */\n\tvar bannerTitle = $('.banner .text h3');\n\n\t// determine if string is hashtag before converting to link\n\tif (bannerTitle.length && bannerTitle[0].innerHTML.charAt(0) === '#') {\n\t\tvar linkRef = 'https://www.instagram.com/explore/tags/' + bannerTitle.text().substring(1);\n\t\tbannerTitle.wrap('<a></a>').parent().attr({\n\t\t\t'target':'_blank',\n\t\t\t'href':linkRef,\n\t\t});\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * initialize post grid masonry\n * data-component = 'grid-masonry'\n * @return {[type]} [description]\n */\nfunction initPostGridMasonry() {\n\tvar postGridEl = $('.post-grid');\n\n\tif (postGridEl.length) {\n\t\t/**\n\t\t * masonry grid for home page\n\t\t * @return {[type]} [description]\n\t\t */\n\t\tvar postGridMsnry = postGridEl.masonry({\n\t\t\titemSelector: '.post-item',\n\t\t\tcolumnWidth: '.post-grid-sizer',\n\t\t\tgutter: 0,\n\t\t\tpercentPosition: true\n\t\t});\n\n\t\tpostGridMsnry.imagesLoaded().progress( function() {\n\t\t\tpostGridMsnry.masonry('layout');\n\t\t});\n\t} else {\n\t\treturn false;\n\t}\n}\n","'use strict';\n\n/* globals $ */\n/* globals document*/\n/* globals window */\n\n/**\n * lazy load article images\n * data-component = 'lazyload-images'\n */\nfunction articleImgLazy() {\n\t$(\"img.lazy\").lazyload({\n\t\teffect : \"fadeIn\",\n\t\tthreshold: 200,\n\t\tappear: function(){\n\t\t\tvertImgFix(); // alignment for vertical images\n\t\t\tsbsVertImg(); // alignment for side-by-side vertical images\n\t\t\tinitFeatherlightSingle(this);\n\t\t}\n\t});\n}\n\n/**\n * [imgClearfix description]\n * data-component = 'clearfix-images'\n */\nfunction imgClearfix() {\n\t/**\n\t * add clearfix div to before side-by-side images\n\t * for alignment fix\n\t */\n\t$('article .vert-img.col-2-img').each(function(){\n\t\tif (!$(this).prev().is('p')){\n\t\t\t$(this).before('<div class=\"empty-fill\"></div>');\n\t\t}\n\t});\n\n\t/**\n\t * add clearfix to before landscape images\n\t */\n\t$('article p:not(.vert-img)').each(function(){\n\t\tif ($(this).prev().hasClass('vert-img')){\n\t\t\t$(this).before('<div class=\"empty-fill\"></div>');\n\t\t}\n\t});\n}\n\n/**\n * Image modal viewer for articles\n * data-component = 'featherlight-gallery-images'\n */\nfunction initFeatherlight(){\n\tvar articleImg = $('article img');\n\tvar imgArr = articleImg.get();\n\tvar hrefVal;\n\n\t// for each article image found, duplicate the img-src\n\t// value into a data-featherlight attr\n\tfor (var i=0, len=imgArr.length; i<len; i++){\n\t\t hrefVal = $(imgArr[i]).attr('src');\n\t\t $(imgArr[i]).attr('data-featherlight',hrefVal);\n\t}\n\n\t// articleImg.featherlight();\n\tarticleImg.featherlightGallery();\n}\n\n/**\n * [initFeatherlightSingle description]\n * @param  {[type]} el [description]\n * data-component = 'featherlight-single-images'\n */\nfunction initFeatherlightSingle(el){\n\tvar hrefVal;\n\tvar $el = $(el);\n\n\threfVal = $el.attr('data-original');\n\t$el.attr('data-featherlight',hrefVal);\n\n\t// articleImg.featherlight();\n\t$el.featherlightGallery();\n}\n\n/**\n * Detect portrait images and add class to fix alignment\n * data-component = 'vertical-images'\n */\nfunction vertImgFix(){\n\tvar imgArr = $('article img').get();\n\n\tfor (var i=0, len=imgArr.length; i<len; i++){\n\t\t// console.log(imgArr[i]);\n\t\tif( $(imgArr[i]).width() < $(imgArr[i]).height() ){\n\t\t\t$(imgArr[i]).parent().addClass('vert-img');\n\t\t}\n\t}\n}\n\n/**\n * Add markdown image title/alt attr into a caption below\n * the image\n * data-component = 'image-titles'\n */\nfunction imgTitle(){\n\t$('article img').each(function(){\n\t\t$(this).attr('title', $(this).attr('alt'));\n\t\t$(this).parent().append('<span class=\"caption\">'+$(this).attr('alt')+'</span>')\n\t})\n}\n\n/**\n * Detect side-by-side portrait images and add a class for\n * alignment\n * data-component = 'side-vertical-images'\n */\nfunction sbsVertImg(){\n\tvar imgArr = $('article .vert-img').get();\n\n\tvar j = 0;\n\n\tif (imgArr.length <= 0) {\n\t\treturn false;\n\t}\n\n\tfor (var i=0, len=imgArr.length; i<len;  i++){\n\t\tvar nextSibling = $(imgArr[i]).next();\n\n\t\tif (nextSibling.attr('class') == 'vert-img'){\n\t\t\t$(imgArr[i]).addClass('col-2-img');\n\t\t\tnextSibling.addClass('col-2-img');\n\t\t\tj++;\n\t\t}\n\t}\n\n\t// if (j > 0){\n\t \t// console.log(j + \"pairs of vertical images found\");\n\t// } else {\n\t \t// console.log(\"no pairs of vertical images found.\");\n\t// }\n}\n\n/**\n * Random food icon generated at end of each article\n * - for japan articles only\n * data-component = 'article-icon'\n */\nfunction generateArticleIcon(){\n\tvar articleType = document.querySelector('article').dataset.category;\n\tvar selectedArr;\n\n\tvar iconArrJapan = [\n\t\t\"unagi-nigiri\",\n\t\t\"udon\",\n\t\t\"nigiri\",\n\t\t\"ikura-gunkan-maki\",\n\t\t\"okonomiyaki\"\n\t];\n\n\tvar iconArrIndo = [\n\t\t\"backpack\",\n\t\t\"horse\",\n\t\t\"palm-trees\",\n\t\t\"surf\",\n\t\t\"volcano\",\n\t\t\"beach\",\n\t\t\"sea\",\n\t\t\"summer\"\n\t];\n\n\tswitch(articleType) {\n\t\tcase 'indonesia':\n\t\tselectedArr = iconArrIndo;\n\t\tbreak;\n\t\tcase 'japan':\n\t\tdefault:\n\t\tselectedArr = iconArrJapan;\n\t\tbreak;\n\t}\n\n\tvar i = Math.floor((Math.random() * 5));\n\n\t$('.post-flourish.top').addClass(selectedArr[i]);\n}\n\n/**\n * open all inline article links in a new tab\n * data-component = 'article-links'\n * @return {[type]} [description]\n */\nfunction articleLinks(){\n\t$('article a').each(function(){\n\t\t$(this).attr({\n\t\t\t'target': '_blank',\n\t\t\t'rel': 'noopener noreferrer'\n\t\t});\n\t});\n}","'use strict';\n\n/* globals $ */\n/* globals document*/\n/* globals window */\n\n/* globals initPostGridMasonry */\n/* globals instaBannerHashtagLink */\n/* globals initFeatherlight */\n/* globals generateArticleIcon */\n/* globals articleLinks */\n/* globals backtoTopButton */\n/* globals articleImgLazy */\n/* globals vertImgFix */\n/* globals sbsVertImg */\n/* globals imgTitle */\n/* globals imgClearfix */\n\n/**\n * init scripts\n */\n\nfunction loadPlugins() {\n\tvar componentEl = $('[data-component]');\n\n\tcomponentEl.each((i, el) => {\n\t\tvar componentStr = el.dataset.component.replace(/'/g, '\"');\n\t\tvar componentArr = JSON.parse(componentStr);\n\n\t\tcomponentArr.map((val, key) => {\n\t\t\tconsole.log(val);\n\t\t});\n\t});\n}\n\n$(document).ready(function(){\n\n\tloadPlugins();\n\n\n\tinitPostGridMasonry();\n\tinstaBannerHashtagLink();\n\n\tif ($('article').length) {\n\t\tinitFeatherlight();\n\t\tgenerateArticleIcon();\n\t\tarticleLinks();\n\t\tbacktoTopButton();\n\t\tarticleImgLazy();\n\n\t\t$('article').imagesLoaded()\n\t\t\t.progress(function(instance, image){\n\t\t\t\t// console.log('imgload-progress', image.img);\n\n\t\t\t\tvar imgEl = $(image.img);\n\t\t\t\t/**\n\t\t\t\t * Delay image display until all images in <p> tag\n\t\t\t\t * have been loaded\n\t\t\t\t *\n\t\t\t\t * (2017) what a shitty implementation of lazy load, you should\n\t\t\t\t * be ashamed.\n\t\t\t\t */\n\t\t\t\tif ($(window).width() > 768){\n\t\t\t\t\timgEl.delay('400').addClass('ready');\n\t\t\t\t} else {\n\t\t\t\t\timgEl.addClass('ready');\n\t\t\t\t}\n\t\t\t})\n\t\t\t.done(function(instance){\n\t\t\t\t// console.log('imageload done');\n\t\t\t\tvertImgFix(); // alignment for vertical images\n\t\t\t\tsbsVertImg(); // alignment for side-by-side vertical images\n\t\t\t\timgTitle(); // generate image caption\n\t\t\t\timgClearfix(); // clearfix for article images\n\n\t\t\t});\n\t}\n});\n"]}